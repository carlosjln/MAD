/*
 * MAD
 * Modular Application Development
 *
 * https://github.com/carlosjln/mad
 * https://github.com/carlosjln/mad-nodejs
 * https://github.com/carlosjln/mad-examples
 *
 * Author: Carlos J. Lopez
 * https://github.com/carlosjln
 */
String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),function(t,e){function n(){}function r(t,e,n){var r=c[t],o=e,a=n;return"function"!==i(e)&&(o=null,a=e),r&&o?o.call(r,a):void s(t,o,a)}var o,i=(Array.prototype.splice,e.get_type),c={},a=function(){function e(t){var r=this;if(r instanceof e==!1)return new e(t);var c,a,u=r.transport=o();for(var l in t)c=i(r[l]),a=t[l],!t.hasOwnProperty(l)||"undefined"!==c&&c!==i(a)||(r[l]=a);var s=r.context||r,f=(r.method||"get").toUpperCase(),d=r.url,p=r.data;u.onreadystatechange=function(){n.call(r)},u.open(f,d,!0),"POST"===f?u.setRequestHeader("Content-type","application/x-www-form-urlencoded"):p&&(d=d+(d.indexOf("?")>-1?"&":"?")+p,p=null),r.before.call(s,r,t),u.send(p)}function n(t){var e,n,r=this.transport,o=r.readyState,i=this.context||this;if(4!==o)return null;try{e=r.status}catch(t){return null}if(200!==e)return null;var c,a=r.responseText;try{n=new Function("return ("+a+")")(),this.succeeded.call(i,n)}catch(t){c=t,this.failed.call(i,t)}this.completed.call(i,c,n)}function r(){}var o=t.XMLHttpRequest?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};return e.prototype={constructor:e,url:"",method:"GET",before:r,completed:r,succeeded:r,failed:r},e}(),u=function(){function t(t){var e=this;e.module_id=t,e.templates={},e.styles={},e.components={}}function e(t,e){var n,r=document.head||document.getElementsByTagName("head")[0];for(var o in e)n=(e[o]||"").trim(),n&&e.hasOwnProperty(o)&&(style=document.createElement("style"),style.setAttribute("type","text/css"),style.styleSheet?style.styleSheet.cssText=n:style.insertBefore(document.createTextNode(n),null),r.insertBefore(style,null),t[o]=style)}function r(t,e){var n,r;for(r in e)if(n=e[r],n&&"string"==typeof n&&e.hasOwnProperty(r))try{t[r]=new Function("return ("+n+");")()}catch(t){throw t}}return t.prototype={constructor:t,update:function(t){if("object"===i(t)){var o=this,c=n.tools.copy;c(t.templates,o.templates,!0),e(o.styles,t.styles),r(o.components,t.components)}},get:function(t,e){var r=this,o="";for(var i in t)t.hasOwnProperty(i)&&(o+=(o?"&":"")+encodeURIComponent(i)+"="+encodeURIComponent(t[i].join("|")));n.request({url:"mad/module/"+r.module_id+"/resources",data:o,on_success:function(n){if(r.update(n.resources),"function"==typeof e)try{e.call(t)}catch(t){throw t}}})}},t}(),l=function(){function t(t){if("string"!=typeof t)throw"The module [id] must be a string.";var e=this;e.id=t,e.resources=new u(t)}return t.prototype={constructor:t,initialize:function(){}},t.initialize=function(t){var e=t.id,n=t.source,r=t.resources;if(e&&n){var i=new l(e);try{new Function("return ("+n+");")().call(i,o),i.resources.update(r),i.initialize()}catch(t){}return i}},t}(),s=function(){function t(t,o,i){var c={module_id:t,callback:o,data:i};return new a({url:"mad/module/"+t,context:c,before:e,succeeded:n,failed:r})}function e(){}function n(t){if(!t)return console.log("Exception: Module could not be loaded.");if(t.exception)return console.log("Exception: "+(t.exception||"Module could not be loaded."));var e=this,n=e.module_id,r=l.initialize(t);if(r){c[n]=r;var i=e.data,a=i instanceof Array?i:[i];void 0==i&&(a=void 0),(this.callback||o).apply(r,a)}}function r(t){throw t}function o(){}return t}();o=l.initialize({id:"shared",source:"function shared() {return false;}"}),n.get_module=r,n.version="0.0.1",t.MAD=n}(window,function(t,e){function n(t,e,r){var o,i,c=a(t);if(r=r===!0,"date"===c)return e=new Date,e.setTime(t.getTime()),e;if("array"===c&&r===!1){var u=t.length;for(e=void 0===e?[]:e;u--;)e[u]=n(t[u],e[u],r);return e}if("object"===c){e=void 0===e?{}:e;for(var l in t)t.hasOwnProperty(l)&&(o=t[l],i=e[l],e[l]=n(o,i,r));return e}return r&&void 0!==e?e:t}function r(){for(var t=arguments,e=t.length,r={},o=0;o<e;o++)n(t[o],r);return r}function o(t,e){for(var n,r=t.length,o=0,i=[];o<r;o++)n=t[o],e(n)&&(i[i.length]=n);return i}function i(t){for(var e,n,r,o,i,a,l,s=u,f=c(t),d=f.length,p=0,h="";p<d;)e=f.charCodeAt(p++),n=f.charCodeAt(p++),r=f.charCodeAt(p++),o=e>>2,i=(3&e)<<4|n>>4,a=(15&n)<<2|r>>6,l=63&r,isNaN(n)?a=l=64:isNaN(r)&&(l=64),h=h+s.charAt(o)+s.charAt(i)+s.charAt(a)+s.charAt(l);return h}function c(t){for(var e,n=t.replace(/\r\n/g,"\n"),r=n.length,o=0,i="";r--;)e=n.charCodeAt(o++),e<128?i+=String.fromCharCode(e):e>127&&e<2048?(i+=String.fromCharCode(e>>6|192),i+=String.fromCharCode(63&e|128)):(i+=String.fromCharCode(e>>12|224),i+=String.fromCharCode(e>>6&63|128),i+=String.fromCharCode(63&e|128));return i}var a=function(){function t(t){var r=typeof t;return null===t?"null":"object"===r||"function"===r?n[e.call(t)]||"object":r}var e=Object.prototype.toString,n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error"};return t}(),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{get_type:a,copy:n,merge:r,filter:o,encode_base64:i,encode_utf8:c}}(window,document));